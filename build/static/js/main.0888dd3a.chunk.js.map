{"version":3,"sources":["components/ContextMenu/index.jsx","constants/cytoscape.js","cytoscape/cyJSONBuilders.js","graphCommands/graph.js","graphCommands/variableNameCommands.js","components/EditModeMenus/index.jsx","graphCommands/factorCommands.js","graphCommands/layoutCommands.js","components/Header/styles.js","utils/url.js","components/DownloadButton/presentation.jsx","components/DownloadButton/index.js","components/DownloadButton/container.js","components/Header/presentation.jsx","components/Header/container.js","components/Header/index.js","constants/InternalPropTypes.js","components/FactorLibrary/styles.js","components/FactorLibrary/presentation.jsx","components/FactorLibrary/container.js","components/FactorLibrary/index.js","cytoscape/index.js","style/defaultTheme.js","components/App/style.js","cytoscape/style.js","components/App/index.jsx","serviceWorker.js","index.js","static/icon.png"],"names":["variableNames","testName","existingName","name","ContextMenu","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","destroyMenu","state","menu","destroy","buildCommand","commandBuilder","cy","getVariableName","existingNames","nodes","map","node","data","_this$state","variableNameIndex","variableNameLoop","filter","length","concat","setState","buildMenus","prevProps","_this$props","selector","commandBuilders","theme","commands","cxtmenu","fillColor","altBackground","React","Component","ContextMenuWrapper","react_default","a","createElement","dist","Consumer","cyContext","styled_components_browser_esm","ContextMenu_ContextMenu","assign","NODE_TYPES","VARIABLE","FACTOR","FACTOR_INPUT","FACTOR_OUTPUT","VARIABLE_TYPES","factorCyJSON","factorFunction","arguments","undefined","position","objectSpread","id","uuidv4","type","factorChildCyJSON","childType","addVariable","variableType","generic","content","select","ele","ev","add","variableCyJSON","rmElement","descendants","remove","addLatentGeneric","renameNode","_ele$data","factor","rename","window","prompt","alert","nodeBase","eh","edgehandles","disable","on","e","source","target","added","move","console","log","checkEdgeValid","enable","start","menuDefinitions","_menuDefinitions","defineProperty","parent","_ele$data2","layout","run","EditModeMenus","entries","_ref","_ref2","slicedToArray","components_ContextMenu","key","HeaderWrapper","styled","h1","_templateObject","background","color","border","HeaderImage","img","_templateObject2","buttonStyle","hoverBackground","hoverColor","hoverBorder","UploadLabel","_templateObject3","label","_templateObject4","UploadInput","input","_templateObject5","DownloadButtonInner","button","_templateObject6","HeaderButtons","ul","_templateObject7","HeaderText","div","_templateObject8","ExamplePicker","_templateObject9","ExampleList","_templateObject10","jsonToBlob","jsonString","JSON","stringify","blob","Blob","URL","createObjectURL","DownloadButtonPresentation","children","triggerDownload","href","dlRef","buttonRender","react","ref","download","rel","container","DownloadButtonContainer","downloadJSON","getDownload","componentDidUpdate","current","click","createRef","Presentation","HeaderPresentation","getCyJSON","loaderRef","examples","handleExampleChange","src","icon","DownloadButton","onClick","role","htmlFor","onChange","value","example","examplesJSON","Icecream","Scale","VAE","NaiveBayes","TrueSkill","HeaderContainer","context","json","elements","handleLoad","parse","result","error","message","handleFile","files","jsonFile","reader","FileReader","onloadend","readAsText","addEventListener","removeEventListener","keys","contextType","CytoscapeContext","PropTypes","shape","inputs","arrayOf","string","isRequired","outputs","objectOf","pt","Wrapper","styles_templateObject","Header","styles_templateObject2","h2","styles_templateObject3","FactorsWrapper","styles_templateObject4","Factor","li","styles_templateObject5","FactorName","span","styles_templateObject6","FactorFieldsetWrapper","styles_templateObject7","FactorFieldsetName","styles_templateObject8","FactorFieldsWrapper","styles_templateObject9","FactorField","styles_templateObject10","AddButton","_templateObject11","FactorsInputLabel","_templateObject12","FactorsInput","_templateObject13","FactorsButton","_templateObject14","FactorsLink","_templateObject15","FactorFieldset","title","fields","field","FactorLibraryPresentation","factors","makeOnClick","clearFactors","styles_Header","styles_HeaderText","_ref3","_ref4","presentation_FactorFieldset","defaultProps","defaultFactors","warnInvalid","allStrings","arr","every","el","String","FactorLibraryContainer","factorFunctionName","addFactor","_ref2$","oldFactors","definition","_cy$extent","extent","x1","y1","w","h","x","y","factorNodeJSON","factorNode","inputNodesJSON","inputName","idx","outputNodesJSON","outputName","union","configureCytoscapeLibrary","cytoscape","use","dagre","neutralBackground","altHoverBackground","borderStyle","altBorderStyle","altBorder","altColor","altHoverColor","CyWrapper","style_templateObject","AppWrapper","style_templateObject2","MainColumn","style_templateObject3","cyElementStyle","width","backgroundColor","top","left","right","bottom","zIndex","cytoscapeLibrary","cytoscapeStyle","style","font-family","font-size","border-color","background-color","text-halign","text-valign","line-color","curve-style","target-arrow-shape","opacity","border-width","shape-polygon-points","border-style","d","App","cyInitJSON","components_EditModeMenus","FactorLibrary","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.0888dd3a.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { CytoscapeContext } from 'react-cytoscape-tools';\nimport { ThemeConsumer } from 'styled-components';\n\nconst variableNames = 'abcdefghijklmnopqrstuvwxyz';\nconst testName = existingName => name => existingName === name;\n\nclass ContextMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { menu: null, variableNameIndex: 0, variableNameLoop: 0 };\n  }\n\n  destroyMenu = () => {\n    if (this.state.menu) { this.state.menu.destroy(); }\n  }\n\n  buildCommand = commandBuilder => commandBuilder(\n    this.props.cy,\n    this.getVariableName,\n  );\n\n  getVariableName = () => {\n    const existingNames = this.props.cy.nodes().map(node => node.data().name);\n    let { variableNameIndex, variableNameLoop } = this.state;\n    let name = null;\n    while (!name || existingNames.filter(testName(name)).length > 0) {\n      name = `${variableNames[variableNameIndex % variableNames.length]}${\n        variableNameLoop > 0 ? variableNameLoop : ''\n      }`;\n\n      variableNameIndex += 1;\n      if (variableNameIndex % variableNames.length === 0) {\n        variableNameLoop += 1;\n      }\n    }\n\n    this.setState({ variableNameIndex, variableNameLoop });\n    return name;\n  }\n\n  buildMenus = (prevProps) => {\n    const { selector, commandBuilders, theme } = this.props;\n\n    if (\n      (prevProps.commandBuilders !== commandBuilders)\n      || (prevProps.selector !== selector)\n    ) {\n      this.destroyMenu();\n      const commands = commandBuilders.map(this.buildCommand);\n      const menu = this.props.cy.cxtmenu({\n        selector,\n        commands,\n        fillColor: theme.altBackground,\n      });\n\n      this.setState({ menu });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props !== prevProps) {\n      this.buildMenus(this.props);\n    }\n  }\n\n  componentDidMount() {\n    this.buildMenus({});\n  }\n\n  componentWillUnmount() {\n    this.destroyMenu();\n    this.setState({ menu: null });\n  }\n\n  render() {\n    return '';\n  }\n}\n\nContextMenu.propTypes = {\n  theme: PropTypes.object.isRequired,\n  cy: PropTypes.object.isRequired,\n  selector: PropTypes.string.isRequired,\n  commandBuilders: PropTypes.arrayOf(PropTypes.func).isRequired,\n};\n\nconst ContextMenuWrapper = props => (\n  <CytoscapeContext.Consumer>\n    { cyContext => (\n      <ThemeConsumer>\n        { theme => (\n          <ContextMenu {...props} cy={cyContext.cy} theme={theme} />)\n        }\n      </ThemeConsumer>)\n    }\n  </CytoscapeContext.Consumer>);\n\nexport default ContextMenuWrapper;\n","export const EDITOR_MODES = {\n  EDIT: 'EDIT',\n  ANALYZE: 'ANALYZE',\n};\n\nexport const NODE_TYPES = {\n  VARIABLE: 'VARIABLE',\n  FACTOR: 'FACTOR',\n  FACTOR_INPUT: 'FACTOR_INPUT',\n  FACTOR_OUTPUT: 'FACTOR_OUTPUT',\n};\n\nexport const VARIABLE_TYPES = {\n  LATENT: 'LATENT',\n  EVIDENCE: 'EVIDENCE',\n  QUERY: 'QUERY',\n};\n","import uuidv4 from 'uuid/v4';\nimport { NODE_TYPES } from '../constants/cytoscape';\n\n/*\n * CyJSON for a variable node\n *\n * name must be unique among variable and factor names\n * variableType must be in VARIABLE_TYPES\n */\nexport const variableCyJSON = (\n  name,\n  variableType,\n  position = null,\n) => ({\n  data: {\n    id: uuidv4(),\n    name,\n    type: NODE_TYPES.VARIABLE,\n    variableType,\n  },\n  ...(position ? { position } : {}),\n});\n\n/*\n * CyJSON for an edge\n *\n * source and target must be Cytoscape ids\n */\nexport const edgeCyJSON = (source, target) => ({\n  data: {\n    id: uuidv4(),\n    source,\n    target,\n  },\n});\n\n/*\n * CyJSON for a factor node\n *\n * name must be unique among variable and factor names\n */\nexport const factorCyJSON = (\n  name,\n  factorFunction = 'None',\n  position = null,\n) => ({\n  data: {\n    id: uuidv4(),\n    name,\n    factorFunction,\n    type: NODE_TYPES.FACTOR,\n  },\n  ...(position ? { position } : {}),\n});\n\n/*\n * CyJSON for a factor input or output node\n *\n * name must be unique among this factor's inputs and outputs\n * childType must be in NODE_TYPES and must be either FACTOR_INPUT or FACTOR_OUTPUT\n *\n * Note that you must manually move this node\n * to the correct parent factor after adding it\n * to the graph.\n */\nexport const factorChildCyJSON = (\n  name,\n  childType,\n  position = null,\n) => ({\n  data: {\n    id: uuidv4(),\n    name,\n    type: childType,\n  },\n  ...(position ? { position } : {}),\n});\n","import { NODE_TYPES, VARIABLE_TYPES } from '../constants/cytoscape';\nimport { variableCyJSON } from '../cytoscape/cyJSONBuilders';\n\n/*\n * Creates a node with the given type\n */\nexport const addVariable = (variableType, generic = false) => (cy, getVariableName) => ({\n  content: (generic ? 'Variable' : `${variableType} Variable`),\n  select(ele, ev) {\n    cy.add(variableCyJSON(\n      getVariableName(),\n      variableType,\n      ev.position,\n    ));\n  },\n});\n\n/*\n * Event handler to enforce edge drawing rules of factor graphs\n */\nconst checkEdgeValid = cy => (e, source, target, added) => {\n  if (\n    (\n      (target.data().type === NODE_TYPES.FACTOR_OUTPUT\n        && source.data().type === NODE_TYPES.VARIABLE)\n      || (\n        target.data().type === NODE_TYPES.VARIABLE\n        && source.data().type === NODE_TYPES.FACTOR_INPUT\n      )\n    )\n  ) {\n    added.move({ source: target.id(), target: source.id() });\n  } else if (\n    !(\n      (source.data().type === NODE_TYPES.FACTOR_OUTPUT\n        && target.data().type === NODE_TYPES.VARIABLE)\n      || (\n        source.data().type === NODE_TYPES.VARIABLE\n        && target.data().type === NODE_TYPES.FACTOR_INPUT\n      )\n    )\n  ) {\n    console.log(\n      'Edges only allowed from variables to factor inputs and from factor outputs to variables',\n    );\n    cy.remove(added);\n  }\n};\n\n/*\n * Starts drawing an edge from the selected node to any other\n */\nexport const drawEdge = (cy) => {\n  // Register some edge behavior hooks\n  const eh = cy.edgehandles({});\n  eh.disable();\n  cy.on('ehstop', () => eh.disable());\n  cy.on('ehcomplete', checkEdgeValid(cy));\n  return {\n    content: 'Edge',\n    select(ele) {\n      eh.enable();\n      eh.start(ele);\n    },\n  };\n};\n\n/*\n * Removes the selected node\n */\nexport const rmElement = () => ({\n  content: 'Remove',\n  select(ele) {\n    ele.descendants().remove();\n    ele.remove();\n  },\n});\n\nexport const addQuery = addVariable(VARIABLE_TYPES.QUERY);\nexport const addEvidence = addVariable(VARIABLE_TYPES.EVIDENCE);\nexport const addLatent = addVariable(VARIABLE_TYPES.LATENT);\nexport const addLatentGeneric = addVariable(VARIABLE_TYPES.LATENT, true);\n","import { NODE_TYPES } from '../constants/cytoscape';\n\n/*\n * Renames a node using a prompt window.\n */\nexport const renameNode = cy => ({\n  content: 'Rename',\n  select(ele) {\n    const { type, name, factor } = ele.data();\n    const rename = window.prompt(`Rename ${name} to:`, name);\n\n    // If the user exits the dialog, do nothing\n    if (!rename) {\n      return;\n    }\n\n    // Check for name collisions in correct scope\n    if (type === NODE_TYPES.FACTOR_INPUT || type === NODE_TYPES.FACTOR_OUTPUT) {\n      if (\n        cy\n          .nodes()\n          .filter(`node[factor=\"${factor}\"]`)\n          .filter(`node[name=\"${rename}\"]`).length > 0\n      ) {\n        window.alert('Name already in use.');\n        return;\n      }\n    } else if (cy.nodes().filter(`node[name=\"${rename}\"]`).length > 0) {\n      window.alert('Name already in use.');\n      return;\n    }\n\n    ele.data('name', rename);\n  },\n});\n\n/*\n * Selects a factor function name\n * using a prompt window\n */\nexport const selectFactorFunction = () => ({\n  content: 'Select Function',\n  select(ele) {\n    const { factorFunction, type } = ele.data();\n    if (type !== NODE_TYPES.FACTOR) {\n      return;\n    }\n    const rename = window.prompt(\n      `Change factor function from ${factorFunction} to:`,\n      factorFunction,\n    );\n\n    // If the user exits the dialog, do nothing\n    if (!rename) {\n      return;\n    }\n    ele.data('factorFunction', rename);\n  },\n});\n","import React from 'react';\nimport ContextMenu from '../ContextMenu';\nimport { NODE_TYPES } from '../../constants/cytoscape';\nimport { drawEdge, rmElement, addLatentGeneric } from '../../graphCommands/graph';\nimport { renameNode, selectFactorFunction } from '../../graphCommands/variableNameCommands';\nimport { addFactorInput, addFactorOutput, addFactor } from '../../graphCommands/factorCommands';\nimport { relayoutGraph } from '../../graphCommands/layoutCommands';\nimport { exportTikz } from '../../graphCommands/processCommands';\n\nconst nodeBase = [drawEdge, rmElement, renameNode];\nconst menuDefinitions = {\n  [`node[type=\"${NODE_TYPES.VARIABLE}\"]`]: [\n    ...nodeBase,\n  ],\n  [`node[type=\"${NODE_TYPES.FACTOR}\"]`]: [\n    rmElement,\n    renameNode,\n    addFactorInput,\n    addFactorOutput,\n    selectFactorFunction,\n  ],\n  edge: [rmElement],\n  [`node[type=\"${NODE_TYPES.FACTOR_INPUT}\"]`]: nodeBase,\n  [`node[type=\"${NODE_TYPES.FACTOR_OUTPUT}\"]`]: nodeBase,\n  core: [\n    //    exportTikz,\n    addLatentGeneric,\n    relayoutGraph,\n    addFactor,\n  ],\n};\n\nconst EditModeMenus = () => (\n  Object.entries(menuDefinitions).map(\n    ([selector, commandBuilders]) => (\n      <ContextMenu\n        key={selector}\n        selector={selector}\n        commandBuilders={commandBuilders}\n      />\n    ),\n  )\n);\n\nexport default EditModeMenus;\n","import { NODE_TYPES } from '../constants/cytoscape';\nimport {\n  factorCyJSON,\n  factorChildCyJSON,\n} from '../cytoscape/cyJSONBuilders';\n\n/*\n * Creates a factor node\n */\nexport const addFactor = (cy, getVariableName) => ({\n  content: 'Factor',\n  select(ele, ev) {\n    const factor = cy.add(\n      factorCyJSON(\n        getVariableName(),\n        'None',\n        ev.position,\n      ),\n    );\n\n    const child = cy.add(factorChildCyJSON(\n      getVariableName(),\n      NODE_TYPES.FACTOR_OUTPUT,\n      ev.position,\n    ));\n    child.move({ parent: factor.id() });\n  },\n});\n\nexport const addFactorInput = (cy, getVariableName) => ({\n  content: 'Add input',\n  select(ele, ev) {\n    const { type, id } = ele.data();\n    if (type !== NODE_TYPES.FACTOR) return;\n    const child = cy.add(factorChildCyJSON(\n      getVariableName(),\n      NODE_TYPES.FACTOR_INPUT,\n      ev.position,\n    ));\n\n    child.move({ parent: id });\n  },\n});\n\nexport const addFactorOutput = (cy, getVariableName) => ({\n  content: 'Add output',\n  select(ele, ev) {\n    const { type, id } = ele.data();\n    if (type !== NODE_TYPES.FACTOR) return;\n    const child = cy.add(factorChildCyJSON(\n      getVariableName(),\n      NODE_TYPES.FACTOR_OUTPUT,\n      ev.position,\n    ));\n\n    child.move({ parent: id });\n  },\n});\n","export const relayoutGraph = cy => ({\n  content: 'Relayout graph',\n  select() {\n    cy.layout({ name: 'dagre' }).run();\n  },\n});\n","import styled from 'styled-components';\n\nexport const HeaderWrapper = styled.h1`\n  width: 100%;\n  display: flex;\n  flex-shrink: 1;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: row;\n  background: ${props => props.theme.background};\n  color: ${props => props.theme.color};\n\n  border-color: ${props => props.theme.border};\n  border-right: 1px solid;\n  border-bottom: 1px solid; \n  padding: 10px;\n`;\n\nexport const HeaderImage = styled.img`\n  margin: 0 13px;\n  height: 40px;\n  width: 40px;\n`;\n\nexport const buttonStyle = props => `\n  display: block;\n  border: 1px solid ${props.theme.border};\n  background: ${props.theme.background};\n  color: ${props.theme.color};\n  &:hover {\n    background: ${props.theme.hoverBackground};\n    color: ${props.theme.hoverColor};\n    border-color: ${props.theme.hoverBorder};\n  }\n  font-family: Consolas, Courier, monospace;\n  font-size: 100%;\n  cursor: pointer;\n  padding: 10px;\n  margin: 0 10px;\n  box-sizing: border-box;\n`;\n\nexport const HeaderButton = styled.a`\n  ${buttonStyle}\n`;\n\nexport const UploadLabel = styled.label`\n  ${buttonStyle}\n`;\n\nexport const UploadInput = styled.input`\n  display: none;\n`;\n\nexport const DownloadButtonInner = styled.button`\n  ${buttonStyle}\n`;\n\nexport const HeaderButtons = styled.ul`\n  display: flex;\n  flex-direction: row;\n`;\n\nexport const HeaderText = styled.div`\n  display: flex;\n  font-size: 200%;\n  align-items: center;\n`;\n\nexport const ExamplePicker = styled.label`\n  ${buttonStyle}\n`;\n\nexport const ExampleList = styled.select`\n  margin: 0 10px;\n`;\n","\nexport const jsonToBlob = (data) => {\n  const jsonString = JSON.stringify(data, null, 2);\n  const blob = new Blob([jsonString], { type: 'application/json' });\n  return URL.createObjectURL(blob);\n};\n","/* eslint \"jsx-a11y/anchor-has-content\": 0 */\nimport React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\n\nconst DownloadButtonPresentation = ({\n  children,\n  triggerDownload,\n  href,\n  dlRef,\n  buttonRender,\n}) => (\n  buttonRender(triggerDownload, (\n    <Fragment>\n      <a\n        href={href}\n        ref={dlRef}\n        download=\"model.json\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      />\n      {children}\n    </Fragment>)));\n\nDownloadButtonPresentation.propTypes = {\n  children: PropTypes.node.isRequired,\n  triggerDownload: PropTypes.func.isRequired,\n  href: PropTypes.string.isRequired,\n  dlRef: PropTypes.shape({ current: PropTypes.object }).isRequired,\n  buttonRender: PropTypes.func.isRequired,\n};\n\nexport default DownloadButtonPresentation;\n","import container from './container';\n\nexport default container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { jsonToBlob } from '../../utils/url';\nimport Presentation from './presentation';\n\nclass DownloadButtonContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.dlRef = React.createRef();\n    this.state = { href: '' };\n  }\n\n  triggerDownload = () => {\n    const downloadJSON = this.props.getDownload();\n    console.log(JSON.stringify(downloadJSON, null, 2));\n    this.setState({ href: jsonToBlob(downloadJSON) });\n  }\n\n  componentDidUpdate = () => {\n    if (this.state.href) {\n      this.dlRef.current.click();\n      this.setState({ href: '' });\n    }\n  }\n\n  render() {\n    const { triggerDownload, dlRef } = this;\n    const { href } = this.state;\n    const { children, buttonRender } = this.props;\n    return React.createElement(\n      Presentation,\n      {\n        triggerDownload,\n        href,\n        dlRef,\n        buttonRender,\n      },\n      children,\n    );\n  }\n}\n\nDownloadButtonContainer.propTypes = {\n  getDownload: PropTypes.func.isRequired,\n  children: PropTypes.node.isRequired,\n  buttonRender: PropTypes.func.isRequired,\n};\n\nexport default DownloadButtonContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  HeaderWrapper,\n  UploadLabel,\n  UploadInput,\n  DownloadButtonInner,\n  HeaderText,\n  HeaderImage,\n  HeaderButtons,\n  ExamplePicker,\n  ExampleList,\n} from './styles';\nimport DownloadButton from '../DownloadButton';\nimport icon from '../../static/icon.png';\n\nconst HeaderPresentation = ({\n  getCyJSON,\n  loaderRef,\n  examples,\n  handleExampleChange,\n}) => (\n  <HeaderWrapper>\n    <HeaderText>\n      <HeaderImage src={icon} />\n      Syllog\n    </HeaderText>\n    <HeaderButtons>\n      <DownloadButton\n        getDownload={getCyJSON}\n        buttonRender={(onClick, children) => (\n          <DownloadButtonInner\n            role=\"button\"\n            onClick={onClick}\n          >\n            {children}\n          </DownloadButtonInner>)\n        }\n      >\n        Export Model\n      </DownloadButton>\n      <UploadLabel htmlFor=\"model\">\n        Import Model\n        <UploadInput\n          type=\"file\"\n          id=\"model\"\n          ref={loaderRef}\n        />\n      </UploadLabel>\n      <ExamplePicker>\n        Load example:\n        <ExampleList onChange={handleExampleChange}>\n          {\n            [<option key=\"\" value=\"\">---Examples---</option>].concat(\n              examples.map(example => (\n                <option key={example} value={example}>\n                  {example}\n                </option>\n              )),\n            )\n          }\n        </ExampleList>\n      </ExamplePicker>\n    </HeaderButtons>\n  </HeaderWrapper>\n);\n\nHeaderPresentation.propTypes = {\n  getCyJSON: PropTypes.func.isRequired,\n  handleExampleChange: PropTypes.func.isRequired,\n  loaderRef: PropTypes.shape({ current: PropTypes.object }).isRequired,\n  examples: PropTypes.arrayOf(PropTypes.string).isRequired,\n};\n\nexport default HeaderPresentation;\n","import React from 'react';\nimport { CytoscapeContext } from 'react-cytoscape-tools';\nimport Presentation from './presentation';\nimport Icecream from '../../static/icecream';\nimport Scale from '../../static/scale';\nimport NaiveBayes from '../../static/naiveBayes';\nimport TrueSkill from '../../static/TrueSkill';\nimport VAE from '../../static/VAE';\n\nconst examplesJSON = {\n  Icecream,\n  Scale,\n  VAE,\n  NaiveBayes,\n  TrueSkill,\n};\n\nclass HeaderContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.loaderRef = React.createRef();\n  }\n\n  getCyJSON = () => this.context.cy.json().elements;\n\n  handleLoad = (e) => {\n    try {\n      const json = JSON.parse(e.target.result);\n      // @TODO validate model\n      this.context.cy.json({ elements: json });\n      this.context.cy.layout({ name: 'dagre' }).run();\n    } catch (error) {\n      // TODO warn user\n      console.error(error.message);\n    }\n  }\n\n  handleFile = (e) => {\n    const files = (e.target.files || []);\n    if (files.length < 1) { return; }\n    const jsonFile = files[0];\n    const reader = new FileReader();\n    reader.onloadend = this.handleLoad;\n    reader.readAsText(jsonFile);\n  }\n\n  handleExampleChange = (e) => {\n    const example = e.target.value;\n    if (example) {\n      this.context.cy.json({\n        elements: examplesJSON[example],\n      });\n      this.context.cy.layout({ name: 'dagre' }).run();\n    }\n  }\n\n  componentDidMount() {\n    this.loaderRef.current.addEventListener('change', this.handleFile);\n  }\n\n  componentWillUnmount() {\n    this.loaderRef.current.removeEventListener('change', this.handleFile);\n  }\n\n  render() {\n    const { loaderRef, getCyJSON, handleExampleChange } = this;\n    const examples = Object.keys(examplesJSON);\n    return React.createElement(Presentation,\n      { loaderRef, getCyJSON, examples, handleExampleChange }\n    );\n  }\n}\n\nHeaderContainer.contextType = CytoscapeContext;\n\nexport default HeaderContainer;\n","import container from './container';\n\nexport default container;\n","import PropTypes from 'prop-types';\n\nconst factor = PropTypes.shape({\n  inputs: PropTypes.arrayOf(PropTypes.string).isRequired,\n  outputs: PropTypes.arrayOf(PropTypes.string).isRequired,\n});\n\nconst factors = PropTypes.objectOf(factor);\n\nexport default {\n  factors,\n  factor,\n};\n","import styled from 'styled-components';\n\nexport const pt = key => props => props.theme[key];\n\nexport const Wrapper = styled.div`\nflex: 2;\nheight: 100%;\noverflow: hidden;\nbackground-color: ${pt('background')};\ncolor: ${pt('color')};\nborder-color: ${pt('border')};\nborder-left: 1px solid;\ndisplay: flex;\nflex-direction: column;\n`;\n\nexport const Header = styled.div`\n`;\n\nexport const HeaderText = styled.h2`\ndisplay: block;\npadding: 10px;\nborder-bottom: 1px solid;\nwidth: 100%;\n`;\n\nexport const FactorsWrapper = styled.ul`\n  display: flex;\n  justify-content: flex-start;\n  flex-direction: column;\n  align-items: center;\n  padding: 10px;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  background-color: ${pt('background')};\n  color: ${pt('color')};\n  border-color: ${pt('border')};\n  border-top: 1px solid;\n`;\n\nexport const Factor = styled.li`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: flex-start;\n  overflow-x: hidden;\n  width: 100%;;\n  border: 1px ${pt('altBorderStyle')} ${pt('border')};\n  border-radius: 5px;\n  padding: 10px;\n  margin: 10px;\n  min-height: 250px;\n`;\n\nexport const FactorName = styled.span`\ndisplay: block;\nbackground: ${pt('hoverBackground')};\ncolor: ${pt('altColor')};\nleft: 5px;\nborder-top-right-radius: 5px;\nborder-top-left-radius: 5px;\nborder: 1px solid ${pt('altBorder')};\npadding: 5px;\n`;\n\nexport const FactorFieldsetWrapper = styled.div`\ndisplay: block;\nborder: 1px solid ${pt('border')};\npadding: 5px;\nmargin: 5px 0;\n`;\n\nexport const FactorFieldsetName = styled.span`\ndisplay: block;\nmargin: 5px;\n`;\n\nexport const FactorFieldsWrapper = styled.div`\ndisplay: flex;\nflex-direction: row;\nflex-wrap: wrap;\n`;\n\nexport const FactorField = styled.div`\nmargin: 5px;\ndisplay: inline-block;\nborder: 1px solid ${pt('border')};\npadding: 5px;\n&:hover {\n  background: ${pt('altHoverBackground')};\n  color: ${pt('altHoverColor')};\n}\n`;\n\nexport const AddButton = styled.button`\nmargin: 5px 0;\npadding: 5px;\ndisplay: block;\nbackground: none;\nborder-radius: 0;\n&:hover {\n  background: ${pt('hoverBackground')};\n  cursor: pointer;\n  color: ${pt('hoverColor')};\n}\nhighlight: none;\nborder: 1px solid ${pt('border')};\ncolor: ${pt('color')};\n`;\n\nconst buttonStyle = props => `\n  display: inline-block;\n  border: 1px solid ${pt('border')(props)};\n  background: none;\n  highlight: none;\n  color: ${pt('color')(props)};\n  margin: 10px;\n  padding: 10px;\n  &:hover {\n    background: ${pt('hoverBackground')(props)};\n    color: ${pt('hoverColor')(props)};\n    cursor: pointer;\n  }\n  font-size: 100%;\n  font-family: inherit;\n`;\n\nexport const FactorsInputLabel = styled.label`\n${buttonStyle}\n`;\n\nexport const FactorsInput = styled.input`\ndisplay: none;\n`;\n\nexport const FactorsButton = styled.button`\n${buttonStyle}\n`;\n\nexport const FactorsLink = styled.a`\n${buttonStyle}\ntext-decoration: none;\nfont-size: 100%;\n\n`;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport InternalPropTypes from '../../constants/InternalPropTypes';\nimport {\n  Wrapper,\n  Header,\n  HeaderText,\n  FactorsWrapper,\n  Factor,\n  FactorName,\n  FactorFieldsetWrapper,\n  FactorFieldsetName,\n  FactorFieldsWrapper,\n  FactorField,\n  AddButton,\n  FactorsLink,\n  FactorsButton,\n  FactorsInput,\n  FactorsInputLabel,\n} from './styles';\nimport { jsonToBlob } from '../../utils/url';\n\nconst FactorFieldset = ({ title, fields }) => (\n  <FactorFieldsetWrapper>\n    <FactorFieldsetName>{title}</FactorFieldsetName>\n    <FactorFieldsWrapper>\n      {\n        fields.map(field => (\n          <FactorField key={field}>\n            {field}\n          </FactorField>))\n      }\n    </FactorFieldsWrapper>\n  </FactorFieldsetWrapper>\n);\n\nFactorFieldset.propTypes = {\n  title: PropTypes.string.isRequired,\n  fields: PropTypes.arrayOf(PropTypes.string).isRequired,\n};\n\n\nconst FactorLibraryPresentation = ({\n  loaderRef,\n  factors,\n  makeOnClick,\n  clearFactors,\n}) => (\n  <Wrapper>\n    <Header>\n      <HeaderText>Factors</HeaderText>\n      <FactorsInputLabel>\n        Import Factors\n        <FactorsInput\n          type=\"file\"\n          id=\"factors\"\n          ref={loaderRef}\n        />\n      </FactorsInputLabel>\n      <FactorsLink\n        href={jsonToBlob(factors)}\n        download=\"factors.json\"\n      >\n        Export Factors\n      </FactorsLink>\n      <FactorsButton\n        role=\"button\"\n        onClick={clearFactors}\n      >\n        Clear Factors\n      </FactorsButton>\n    </Header>\n    <FactorsWrapper>\n      {\n        Object.entries(factors).map(([name, factor]) => (\n          <Factor key={name}>\n            <FactorName>{name}</FactorName>\n            <FactorFieldset title=\"Inputs\" fields={factor.inputs} />\n            <FactorFieldset title=\"Outputs\" fields={factor.outputs} />\n            <AddButton\n              role=\"button\"\n              onClick={makeOnClick(name)}\n            >\n              Add\n            </AddButton>\n          </Factor>\n        ))\n      }\n    </FactorsWrapper>\n  </Wrapper>\n);\n\n\nFactorLibraryPresentation.defaultProps = {\n  factors: {},\n};\n\nFactorLibraryPresentation.propTypes = {\n  loaderRef: PropTypes.shape({ current: PropTypes.object }).isRequired,\n  factors: InternalPropTypes.factors,\n  makeOnClick: PropTypes.func.isRequired,\n  clearFactors: PropTypes.func.isRequired,\n};\n\nexport default FactorLibraryPresentation;\n","import React from 'react';\nimport { CytoscapeContext } from 'react-cytoscape-tools';\nimport uuidv4 from 'uuid/v4';\nimport { NODE_TYPES } from '../../constants/cytoscape';\nimport {\n  factorCyJSON,\n  factorChildCyJSON,\n} from '../../cytoscape/cyJSONBuilders';\nimport Presentation from './presentation';\n\nconst defaultFactors = {};\n\n// TODO warn user\nconst warnInvalid = name => console.log(`\\\nInvalid Factor JSON. \\\nMust consist of a map of factor function names \\\nto objects of shape \\\n{ inputs: ['input1', 'input2'....], \\\noutputs: ['output1', 'output2', ...] } \\\neach with at least one output.\nError occurred in key ${name}.\n`);\n\nconst allStrings = arr => arr.every(el => (\n  typeof el === 'string'\n  || el instanceof String\n));\n\nclass FactorLibraryContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.loaderRef = React.createRef();\n    this.state = { factors: defaultFactors };\n  }\n\n  makeOnClick = factorFunctionName => () => this.addFactor(factorFunctionName);\n\n  handleFile = (e) => {\n    const files = (e.target.files || []);\n    if (files.length < 1) { return; }\n    const jsonFile = files[0];\n    const reader = new FileReader();\n    reader.onloadend = this.handleLoad;\n    reader.readAsText(jsonFile);\n  }\n\n  handleLoad = (e) => {\n    try {\n      const json = JSON.parse(e.target.result);\n      if (!(typeof json === 'object')) {\n        return warnInvalid();\n      }\n\n      const valid = Object.entries(json).every(([name, { inputs, outputs }]) => {\n        if (\n          !outputs\n          || !outputs.length\n          || outputs.length < 1\n          || !allStrings(outputs)\n        ) {\n          warnInvalid(name);\n          return false;\n        }\n\n        if (inputs && !allStrings(inputs)) {\n          warnInvalid(name);\n          return false;\n        }\n        return true;\n      });\n      if (valid) {\n        const oldFactors = this.state.factors;\n        this.setState({ factors: { ...oldFactors, ...json } });\n      }\n    } catch (error) {\n      // TODO warn user\n      console.error(error.message);\n    }\n  }\n\n  addFactor = (factorFunctionName) => {\n    const { cy } = this.context;\n    if (!cy) { return; }\n\n    const { factors } = this.state;\n    const definition = factors[factorFunctionName];\n    const {\n      x1,\n      y1,\n      w,\n      h,\n    } = cy.extent();\n\n    const x = x1 + (w / 2);\n    const y = y1 + (h / 2);\n\n    const factorNodeJSON = factorCyJSON(\n      uuidv4(),\n      factorFunctionName,\n      { x, y },\n    );\n\n    const factorNode = cy.add(factorNodeJSON);\n\n    const spacing = 35;\n    const inputNodesJSON = definition.inputs.map(\n      (inputName, idx) => factorChildCyJSON(\n        inputName,\n        NODE_TYPES.FACTOR_INPUT,\n        { y, x: x + idx * spacing },\n      ),\n    );\n    const outputNodesJSON = definition.outputs.map(\n      (outputName, idx) => factorChildCyJSON(\n        outputName,\n        NODE_TYPES.FACTOR_OUTPUT,\n        { y: y + spacing, x: x + idx * spacing },\n      ),\n    );\n\n    const inputs = cy.add(inputNodesJSON);\n    const outputs = cy.add(outputNodesJSON);\n    const children = inputs.union(outputs);\n    children.move({\n      parent: factorNode.id(),\n    });\n  }\n\n  // TODO: warn and confirm on this\n  clearFactors = () => this.setState({ factors: {} });\n\n  componentDidMount() {\n    this.loaderRef.current.addEventListener('change', this.handleFile);\n  }\n\n  componentWillUnmount() {\n    this.loaderRef.current.removeEventListener('change', this.handleFile);\n  }\n\n  render() {\n    const {\n      makeOnClick,\n      loaderRef,\n      clearFactors,\n    } = this;\n    const { factors } = this.state;\n    return React.createElement(Presentation, {\n      loaderRef,\n      factors,\n      makeOnClick,\n      clearFactors,\n    });\n  }\n}\n\nFactorLibraryContainer.contextType = CytoscapeContext;\n\nexport default FactorLibraryContainer;\n","import container from './container';\n\nexport default container;\n","import cytoscape from 'cytoscape';\nimport cxtmenu from 'cytoscape-cxtmenu';\nimport dagre from 'cytoscape-dagre';\nimport edgehandles from 'cytoscape-edgehandles';\n\nconst configureCytoscapeLibrary = () => {\n  cytoscape.use(cxtmenu);\n  cytoscape.use(dagre);\n  cytoscape.use(edgehandles);\n  return cytoscape;\n};\n\nexport default configureCytoscapeLibrary;\n","const white = '#fff';\nconst grey = 'rgba(255, 255, 255, 0.25)';\nconst grey2 = 'rgba(0, 0, 0, 0.25)';\nconst black = '#000';\n\nconst theme = {\n  background: white,\n  neutralBackground: grey, // should contrast with background\n  hoverBackground: black,\n  altBackground: grey2, // should contrast with background and neutralBackground\n  altHoverBackground: white,\n  border: black,\n  borderStyle: 'solid',\n  altBorderStyle: 'dotted',\n  altBorder: black,\n  hoverBorder: white,\n  color: black,\n  altColor: white,\n  hoverColor: white,\n  altHoverColor: black,\n};\n\nexport default theme;\n","import styled from 'styled-components';\n\nexport const CyWrapper = styled.div`\n  flex: 9\n  position: relative;\n  overflow: hidden;\n  width: 100%;\n`;\n\nexport const AppWrapper = styled.div`\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n`;\n\n\nexport const MainColumn = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n  overflow: hidden;\n`;\n","import { NODE_TYPES } from '../constants/cytoscape';\n\n/*\n * Returns a json object that can be\n * provided to cytoscape as a style.\n */\nexport default function getStyle(theme) {\n  const style = [\n    {\n      selector: 'node, edge',\n      style: {\n        'font-family': 'Consolas, Courier, monospace',\n        'font-size': 8,\n        'border-color': theme.color,\n        'background-color': theme.neutralBackground,\n        'text-halign': 'center',\n        'text-valign': 'center',\n        'line-color': theme.altBackground,\n        'curve-style': 'bezier',\n        'target-arrow-shape': 'triangle',\n      },\n    },\n    {\n      selector: 'edge',\n      style: {\n        width: 0.5,\n        color: theme.altBackground,\n        opacity: 0.5,\n      },\n    },\n    {\n      selector: 'node',\n      style: {\n        'border-width': '0.5',\n        label: 'data(name)',\n      },\n    },\n    {\n      selector: `node[type=\"${NODE_TYPES.VARIABLE}\"]`,\n      style: {\n        shape: 'ellipse',\n        'text-valign': 'top',\n      },\n    },\n    {\n      selector: `node[type=\"${NODE_TYPES.FACTOR_INPUT}\"]`,\n      style: {\n        'text-valign': 'top',\n        shape: 'polygon',\n        'shape-polygon-points': '-1 -1 1 -1 0 1 -1 -1',\n      },\n    },\n    {\n      selector: `node[type=\"${NODE_TYPES.FACTOR_OUTPUT}\"]`,\n      style: {\n        'text-valign': 'bottom',\n        shape: 'polygon',\n        'shape-polygon-points': '-1 1 1 1 0 -1 -1 1',\n      },\n    },\n    {\n      selector: `node[type=\"${NODE_TYPES.FACTOR}\"]`,\n      style: {\n        shape: 'square',\n        'border-style': 'dashed',\n        'text-valign': 'top',\n        label: (ele) => {\n          const d = ele.data();\n          return `${d.factorFunction}:${d.name}`;\n        },\n      },\n    },\n  ];\n\n  return style;\n}\n","import React from 'react';\nimport { CytoscapeView, CytoscapeGate, CytoscapeProvider } from 'react-cytoscape-tools';\nimport { ThemeProvider } from 'styled-components';\n\nimport EditModeMenus from '../EditModeMenus';\nimport Header from '../Header';\nimport FactorLibrary from '../FactorLibrary';\nimport getStyle from '../../cytoscape/style';\nimport configureCytoscapeLibrary from '../../cytoscape';\nimport theme from '../../style/defaultTheme';\nimport {\n  CyWrapper,\n  AppWrapper,\n  MainColumn,\n} from './style';\n\n\n// @TODO: Make this into a styled-component,\n// need to allow a render prop in react-cytoscape-tools\nconst cyElementStyle = {\n  width: '100%',\n  position: 'absolute',\n  backgroundColor: theme.neutralBackground,\n  top: 0,\n  left: 0,\n  right: 0,\n  bottom: 0,\n  zIndex: 100,\n};\n\nconst cytoscapeLibrary = configureCytoscapeLibrary();\nconst cytoscapeStyle = getStyle(theme);\n\nconst App = () => (\n  <ThemeProvider theme={theme}>\n    <AppWrapper>\n      <CytoscapeProvider>\n        <CytoscapeGate>\n          <Header />\n        </CytoscapeGate>\n        <MainColumn>\n          <CyWrapper>\n            <CytoscapeView\n              style={cyElementStyle}\n              cyInitJSON={{ style: cytoscapeStyle }}\n              cytoscape={cytoscapeLibrary}\n            />\n            <CytoscapeGate>\n              <EditModeMenus />\n            </CytoscapeGate>\n          </CyWrapper>\n          <FactorLibrary />\n        </MainColumn>\n      </CytoscapeProvider>\n    </AppWrapper>\n  </ThemeProvider>\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\n\nReactDOM.render(React.createElement(App), document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}